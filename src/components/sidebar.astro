---
import { Icon } from "astro-icon";
import { Image } from 'astro:assets';
import { getCollection } from 'astro:content';
import scriptogreLogo from '../assets/images/logo-scriptogre.webp';
const allSocials = await getCollection('socials')
---

<aside id="sidebar" class="sidebar active z-40 xl:sticky xl:top-14 xl:mb-0 xl:pt-14 overflow-hidden xl:overflow-visible transition-max-h ease-in-out duration-500 
  						max-h-32 xl:max-h-[600px] bg-black mb-3.5 rounded border border-solid border-slate p-6 sm:p-8
						  sm:max-h-44 sm:mb-7 sm:gap-6 shadow-2xl">
	<div class="flex relative xl:flex-col justify-start items-center gap-3.5 sm:gap-6">
	  <Image src={ scriptogreLogo } alt="Scriptogres logo" class="w-20 sm:w-28 xl:w-36 rounded-3xl" client:load />
	<div class="xl:text-center">
		<h1 class="font-semibold text-xl xl:mt-2 whitespace-nowrap text-white" title="The Script Ogres">The Script Ogres</h1>
		<p class="text-xs text-light-gray-100 mb-2.5 sm:mb-4">Sleek Sites, WordPress Excluded</p>
		<p class="inline-block text-white text-xs bg-gray-300 text-center rounded-lg py-0.5 px-3 sm:py-1.5 sm:px-4 xl:m-auto font-light">Web Design</p>
	</div>
	<div class="absolute sm:hidden top-[-24px] right-[-25px]">
		<button class="toggleButton hover:z-auto p-2.5 card-item
                    rounded-tr rounded-bl shadow-xl animate__bounceIn text-light-gray
                  text-xs">
			  <Icon name=arrowDown class='h-4' aria-label="Show Contacts" client:media="(max-width: 580px)"/>
		</button>
	</div>
	<div class="absolute hidden sm:block xl:hidden top-[-32px] right-[-33px]">
		<button class="toggleButton card-item hover:z-auto p-2.5
                  rounded-tr rounded-bl shadow-xl animate__bounceIn text-light-gray
                  text-xs">
			  Show Contacts
		</button>
	</div>
	</div>
	<div id="content" class="xl:w-52 opacity-100 transition ease-in-out duration-300 delay-300">
	<hr class="my-4 text-light-gray-70 h-px sm:my-8">
	<ul class="grid grid-cols-1 gap-4 md:grid-cols-2 md:gap-y-8 md:gap-x-4 xl:grid-cols-1">
		<li class="min-w-full flex items-center gap-4 sm:gap-5">
      <div class="shadow-xl rounded-xl p-2 sm:p-4 card-item relative bg-gradient-to-br
      from-card-primary via-transparent to-card-secondary z-10">
  			<Icon name=envelope class="h-4 svgFilter" />
		  </div>
		<div class="text-xs overflow-hidden sm:max-w-[calc(100% - 64px)] xl:max-w-">
			<p class="text-light-gray mb-0.5">EMAIL</p>
			<a href="mailto:tanulchristian@gmail.com" class="text-white text-sm font-normal whitespace-nowrap text-ellipsis truncate block">contact@scriptogres.dev</a>
		</div>
		</li>
		<li class="min-w-full flex items-center gap-4">	
		<div class="shadow-xl rounded-xl p-2 sm:p-4 card-item relative bg-gradient-to-br
               from-card-primary via-transparent to-card-secondary z-10">
			<Icon name=phone class="h-4 svgFilter" />
		</div>
		<div class="text-xs overflow-hidden sm:max-w-[calc(100% - 64px)] xl:max-w-full">
			<p class="text-light-gray mb-0.5">PHONE</p>
			<div class="flex flex-row gap-3.5 sm:flex-col sm:gap-0">
				<a href="tel:+40750437014" class="text-white text-sm font-normal whitespace-nowrap text-ellipsis block">+40 750 437 014</a>
				<a href="tel:+40748916932" class="text-white text-sm font-normal whitespace-nowrap text-ellipsis block">+40 748 916 932</a>
			</div>
		</div>
		</li>
	</ul>
	<hr class="my-4 text-light-gray-70 h-px sm:mt-8 xl:opacity-0 xl:my-2">
	<ul class="flex items-center justify-start pb-1 gap-4 xl:justify-center mt-6 xl:mt-4 ">
		{
		allSocials.map((social) => (
		<li class="list-none">
			<a href={ social.data.url } aria-label={ social.data.name }>
			<Icon name={ social.data.name } class="h-5 fill-icon-light hover:fill-light-gray-90" />
			</a>
		</li>
		))
		}
	</ul>
	</div>		
</aside>

<script>
	document.addEventListener('DOMContentLoaded', OpenModal);
	function OpenModal(){
	  const buttons = document.querySelectorAll('.toggleButton');
	  buttons.forEach(function(button) {
		  button.addEventListener('click', toggleDivSize);
	  });
	  
  
	  function toggleDivSize() {
		const div = document.getElementById('sidebar');
		if (div) {
		  div.classList.toggle('active');
		}
	  }
	};
</script>


<style>
      @-webkit-keyframes bounceIn {
    from,
    20%,
    40%,
    60%,
    80%,
    to {
      -webkit-animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);
      animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);
    }
  
    0% {
      opacity: 0;
      -webkit-transform: scale3d(0.3, 0.3, 0.3);
      transform: scale3d(0.3, 0.3, 0.3);
    }
  
    20% {
      -webkit-transform: scale3d(1.1, 1.1, 1.1);
      transform: scale3d(1.1, 1.1, 1.1);
    }
  
    40% {
      -webkit-transform: scale3d(0.9, 0.9, 0.9);
      transform: scale3d(0.9, 0.9, 0.9);
    }
  
    60% {
      opacity: 1;
      -webkit-transform: scale3d(1.03, 1.03, 1.03);
      transform: scale3d(1.03, 1.03, 1.03);
    }
  
    80% {
      -webkit-transform: scale3d(0.97, 0.97, 0.97);
      transform: scale3d(0.97, 0.97, 0.97);
    }
  
    to {
      opacity: 1;
      -webkit-transform: scale3d(1, 1, 1);
      transform: scale3d(1, 1, 1);
    }
  }
  @keyframes bounceIn {
    from,
    20%,
    40%,
    60%,
    80%,
    to {
      -webkit-animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);
      animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);
    }
  
    0% {
      opacity: 0;
      -webkit-transform: scale3d(0.3, 0.3, 0.3);
      transform: scale3d(0.3, 0.3, 0.3);
    }
  
    20% {
      -webkit-transform: scale3d(1.1, 1.1, 1.1);
      transform: scale3d(1.1, 1.1, 1.1);
    }
  
    40% {
      -webkit-transform: scale3d(0.9, 0.9, 0.9);
      transform: scale3d(0.9, 0.9, 0.9);
    }
  
    60% {
      opacity: 1;
      -webkit-transform: scale3d(1.03, 1.03, 1.03);
      transform: scale3d(1.03, 1.03, 1.03);
    }
  
    80% {
      -webkit-transform: scale3d(0.97, 0.97, 0.97);
      transform: scale3d(0.97, 0.97, 0.97);
    }
  
    to {
      opacity: 1;
      -webkit-transform: scale3d(1, 1, 1);
      transform: scale3d(1, 1, 1);
    }
  }
  .animate__bounceIn {
    -webkit-animation-duration: 1s;
    animation-duration: 1s;
    -webkit-animation-duration: 1s;
    animation-duration: 1s;
    -webkit-animation-name: bounceIn;
    animation-name: bounceIn;
  }
</style>
